<!DOCTYPE html>
<html lang="en">
<head>
    <title>deviceorientation</title>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1">
    <script src = "https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="build/three.js"></script>
</head>
<style>
    body {
        margin: 0px;
        background-color: #000000;
        overflow: hidden;
    }
    #container{
        margin: 0px;
        overflow:hidden;
    }
    #Background {
        background-color: #000000;
        background-image:url("textures/BackgroundStar.jpg");
        height: -webkit-fill-available;
        position: absolute;
        top: 0px; width: 100%;
        color: #ffffff;
        padding: 5px;
        font-family:Monospace;
        font-size:13px;
        font-weight: bold;
        text-align:center;
        box-sizing: border-box;
    }
    
    #Main {
        position: absolute;
        top: 100px; width: 100%;
        color: #ffffff;
        padding: 5px;
        font-family:Monospace;
        font-size:13px;
        font-weight: bold;
        text-align:center;
        box-sizing: border-box;
        z-index = 1;
    }
    
    #Tutorial {
        position: absolute;
        top: 100px; width: 100%;
        color: white;
        padding: 5px;
        font-family:Monospace;
        font-size:13px;
        font-weight: bold;
        text-align:center;
        box-sizing: border-box;
        z-index = 1;
    }
    
    #EndingGame {
        position: absolute;
        top: 100px; width: 100%;
        color: white;
        padding: 5px;
        font-family:Monospace;
        font-size:13px;
        font-weight: bold;
        text-align:center;
        box-sizing: border-box;
        z-index = 1;
    }
    
    a {
        color: #ff8800;
    }
        
    .mybtn {
        background-color: rgba(0, 0, 0, 0);
        border: 2px solid;
        color: white;
        padding: 15px;
        width: 150 px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        font-weight: bold;
        letter-spacing:2px;
        margin: 4px 10px;  
        -webkit-transition-duration: 0.4s; /* Safari */
        transition-duration: 0.4s;
        cursor: pointer;  
    }

    .clickmybtn {
        background-color: rgba(0, 0, 0, 0);
        color: #e6e6e6;
        border: 2px solid #e6e6e6;
    }

    .clickmybtn:hover {
        background-color: #e6e6e6;
        border: 2px solid #e6e6e6;
        color: #1a1a1a;
    }
</style>
<body>
    <div id = "container">
        <div id="Background">
        </div>
        
        <div id="Main">
            <h1>台 灣 萊 雅</h1>
            <h1>Find your power stone</h1>
            <h2>尋找你的能力寶石</h2>
            <button class ="mybtn clickmybtn" onclick="LanguageFunction(1)"> 繁體中文 </button>
            <button class ="mybtn clickmybtn" onclick="LanguageFunction(2)"> English </button>
        </div>
        
        <div id="Tutorial">
            <img id = "tutorialimg " src="textures/phoneturn.png" alt="tutorial" width="100" > <br/>
            <h3 id = "tutorialtext">旋轉手機尋找能力寶石</h3>
        </div>
        
        <div id="EndingGame">
            <h1 id = "Endtext ">恭喜你找到所有能力寶石</h1>
            <h2 id = "Endtext2 ">Congraulation</h2>
            <button class ="mybtn clickmybtn" onclick="location.href='https://www.google.com.tw'"> 填問卷去 </button>
        </div>
        
        <div id="Debug">
            <p id="Counting"></p>
        </div>    
    </div>
        
    <script src="build/three.js"></script>
    <script src="js/ar.js"></script>
    <script src="js/controls/DeviceOrientationControls.js"></script>
    <script src="js/WebGL.js"></script>
    <script src="js/threex.domevents.js"></script>
    <script src="js/TweenMax.min.js"></script>
    <script src="js/GLTFLoader.js"></script>
    <script src="js/OBJLoader.js"></script>
    <script src="js/MTLLoader.js"></script>

<script>
    Tutorial.style.display = "none";
    EndingGame.style.display = "none";
    TweenMax.from("#Background", 0.5 , { y:-5,opacity:0 ,delay:1});
    TweenMax.from("#Main", 0.5 , { y:-5,opacity:0 ,delay:1.25});
    var StartGame = false;
    var CountNumber = 0 ;
    var Language = "Chinese";
    /*
    var loadingScreen ={
        scene: new THREE.Scene(),
        camera:new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1100 ),
        box: new THREE.Mesh(
            new THREE.BoxGeometry(0.5,0.5,0.5),
            new THREE.MeshBasicMaterial({ color:0x4444ff })
        )
    };
    */
    //var LOADING_MANAGER = null;
    //var RESOURCES_LOADED = false;
    
    function LanguageFunction(language){
        Tutorial.style.display = "block";
        if(language == 1){
            Language = "Chinese";
            document.getElementById("tutorialtext").innerHTML = "旋轉手機尋找能力寶石" ;
            console.log("chinese");
        }if(language == 2){
            Language = "English";
            document.getElementById("tutorialtext").innerHTML = "Turn your Phone to find power stone" ;
            console.log("English");
        }
        StartGamefunction();
    }
    
    function StartGamefunction(){
        StartGame = true;
        TweenMax.to("#Background", 0.5 , { y:-5,opacity:0});
        TweenMax.to("#Main", 0.5 , { y:-5,opacity:0,delay:0.25});
        
        TweenMax.from("#Tutorial", 0.5 , { y:-5,opacity:0 ,delay:1} );
        TweenMax.to("#Tutorial", 0.5 , { opacity:0 ,delay:5} );
        init();
        animate();
        var domEvents = new THREEx.DomEvents(camera, renderer.domElement);
        domEvents.addEventListener(scene.getObjectByName("DiamondR1cube"), 'touchstart' , event =>{
            infoanim("R1");
        })
        domEvents.addEventListener(scene.getObjectByName("DiamondG1cube"), 'touchstart' , event =>{
            infoanim("G1");
        })
        domEvents.addEventListener(scene.getObjectByName("DiamondB1cube"), 'touchstart' , event =>{
            infoanim("B1");
        })
        domEvents.addEventListener(scene.getObjectByName("DiamondP1cube"), 'touchstart' , event =>{
            infoanim("P1");
        })
        domEvents.addEventListener(scene.getObjectByName("DiamondY1cube"), 'touchstart' , event =>{
            infoanim("Y1");
        })
        domEvents.addEventListener(scene.getObjectByName("DiamondO1cube"), 'touchstart' , event =>{
            infoanim("O1");
        })
    }
    var camera, scene, renderer, controls;
    
    function init(){
        // init renderer
        renderer = new THREE.WebGLRenderer({
            antialias: true,
            alpha: true
        });
        renderer.setClearColor(new THREE.Color('lightgrey'), 0)
        renderer.setSize( 640, 480 );
        renderer.domElement.style.position = 'absolute'
        renderer.domElement.style.top = '0px'
        renderer.domElement.style.left = '0px'
        document.body.appendChild( renderer.domElement );
        // array of functions for the rendering loop
        var onRenderFcts= [];
        // init scene and camera
        scene = new THREE.Scene();
   
        //Create a camera
        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1100 );
        
        controls = new THREE.DeviceOrientationControls( camera );
        scene.add(camera);
    
        //handle arToolkitSource
        var arToolkitSource = new THREEx.ArToolkitSource({
            sourceType : 'webcam',        
        })
        
        arToolkitSource.init(function onReady(){
            onResize()
        })
    
        // handle resize
        window.addEventListener('resize', function(){
            onResize()
        })
        
        function onResize(){
            arToolkitSource.onResize()    
            arToolkitSource.copySizeTo(renderer.domElement)    
            if( arToolkitContext.arController !== null ){
                arToolkitSource.copySizeTo(arToolkitContext.arController.canvas)    
        }    
    }
        
    //initialize arToolkitContext
    // create atToolkitContext
    var arToolkitContext = new THREEx.ArToolkitContext({
        cameraParametersUrl: THREEx.ArToolkitContext.baseURL + '../data/data/camera_para.dat',
        detectionMode: 'mono',
    })
    // initialize it
    arToolkitContext.init(function onCompleted(){
        // copy projection matrix to camera
        camera.projectionMatrix.copy( arToolkitContext.getProjectionMatrix() );
    })
    // update artoolkit on every frame
    onRenderFcts.push(function(){
        if( arToolkitSource.ready === false )    return
        arToolkitContext.update( arToolkitSource.domElement )
        
        // update scene.visible if the marker is seen
        scene.visible = camera.visible
    })
        
        
                
    //loadingScreen
    /*
    loadingScreen.box.position.set(0,0,5);
    loadingScreen.camera.lookAt(loadingScreen.box.position);
    loadingScreen.scene.add(loadingScreen.box);
        
    loadingManager = new THREE.LoadingManager();
    loadingManager.onprogress = function(item,loaded,total){
        console.log(item,loaded,total);
    };
    loadingManager.onload = function(){
        console.log("loaded all resources");
        RESOURCES_LOADED = true;
    };
   */ 
        
    //////////////////////////////////////////////////////////////////////////////////
    //        add an object in the scene
    var textureLoader = new THREE.TextureLoader();
    R1texture = textureLoader.load( 'textures/redpeople.png' );       
    R1infotexture = textureLoader.load( 'textures/info/redinfo.png' );
    R1info2texture = textureLoader.load( 'textures/info/redinfo2.png' );
    G1texture = textureLoader.load( 'textures/greenpeople.png' );       
    G1infotexture = textureLoader.load( 'textures/info/greeninfo.png' );
    G1info2texture = textureLoader.load( 'textures/info/greeninfo2.png' );
    B1texture = textureLoader.load( 'textures/bluepeople.png' );       
    B1infotexture = textureLoader.load( 'textures/info/blueinfo.png' );
    B1info2texture = textureLoader.load( 'textures/info/blueinfo2.png' );
    P1texture = textureLoader.load( 'textures/purplepeople.png' );       
    P1infotexture = textureLoader.load( 'textures/info/purpleinfo.png' );
    P1info2texture = textureLoader.load( 'textures/info/purpleinfo2.png' );
    Y1texture = textureLoader.load( 'textures/yellowpeople.png' );       
    Y1infotexture = textureLoader.load( 'textures/info/yellowinfo.png' );
    Y1info2texture = textureLoader.load( 'textures/info/yellowinfo2.png' );
    O1texture = textureLoader.load( 'textures/orangepeople.png' );       
    O1infotexture = textureLoader.load( 'textures/info/orangeinfo.png' );
    O1info2texture = textureLoader.load( 'textures/info/orangeinfo2.png' );    
        
                
    var ColorArray = new Array();
    ColorArray[0] = '0xff0000';
    ColorArray[1] = '0x00FF00';
    ColorArray[2] = '0x0099ff';
    ColorArray[3] = '0x9933ff';
    ColorArray[4] = '0xffff00';
    ColorArray[5] = '0xff6600';
        
    var NameArray = new Array();
    NameArray[0] = 'DiamondR1';
    NameArray[1] = 'DiamondG1';
    NameArray[2] = 'DiamondB1';
    NameArray[3] = 'DiamondP1';
    NameArray[4] = 'DiamondY1';
    NameArray[5] = 'DiamondO1';
        
    AddNewModel( NameArray[0] , ColorArray[0] ,-100,30,-10);    //紅
    AddNewModel( NameArray[1] , ColorArray[1] ,100,10,-30);     //綠
    AddNewModel( NameArray[2] , ColorArray[2] ,20,0,100);       //藍
    AddNewModel( NameArray[3] , ColorArray[3] ,100,30,40);      //紫
    AddNewModel( NameArray[4] , ColorArray[4] ,35,-25,-100);    //黃
    AddNewModel( NameArray[5] , ColorArray[5] ,-30,10,-100);    //橘
        
    //Add a light

    var light = new THREE.DirectionalLight( 0xffffff );
    light.position.set( 1, 1, 1 );
    scene.add( light );
    var light = new THREE.DirectionalLight( 0x002288 );
    light.position.set( -1, -1, -1 );
    scene.add( light );
    var light = new THREE.AmbientLight( 0x222222 );
    scene.add( light );
        
    window.addEventListener( 'resize', onWindowResize, false );    
}
    //////////////////////////////////////////////////////////////////////////////////     
    function animate() {
    /*
        if( RESOURCES_LOADED == false){
            window.requestAnimationFrame( animate );
            renderer.render(loadingScreen.scene , loadingScreen.camera);
            return;
        }*/
        window.requestAnimationFrame( animate );
        controls.update();
        renderer.render( scene, camera );
    }
    
    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize( window.innerWidth, window.innerHeight );
    }
   //生成model
    function AddNewModel( MeshName , ModelColor , x , y , z){
        var loader = new THREE.OBJLoader()
        loader.load( 'model/Diamond.obj', function ( object ) {
            object.traverse( function ( child ) {
                if ( child instanceof THREE.Mesh ) {
                    child.material.color.setHex(ModelColor);
                }
            }
        );
        scene.add( object );
        object.scale.set(0.4,0.4,0.4);
        object.name = MeshName;     
        object.position.set(x,y,z);
        console.log("Name"+object.name +"Color"+ ModelColor + "object.position"+object.position.y);
        });

        var cubegeometry = new THREE.BoxGeometry( 18 , 18 , 18 );
        var cubematerial = new THREE.MeshBasicMaterial( {  color: 0xFFF000,  transparent : true,  opacity:0.1 });
        var cubemesh = new THREE.Mesh( cubegeometry, cubematerial );
        cubemesh.position.set(x,y+5,z) ;
        scene.add( cubemesh );
        cubemesh.name = MeshName+"cube";
        console.log("cubeName"+cubemesh.name);
    }

    //要出現的資訊        
    function infoanim(DName){
        if(DName == "R1"){
            this.R1 = new TimelineMax();
            DiamondR1cube = scene.getObjectByName("DiamondR1cube"); 
            this.R1.to(DiamondR1cube.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut});
            //定義寶石名稱
            DiamondR1 = scene.getObjectByName("DiamondR1"); 
            this.R1.to(DiamondR1.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            var geometry = new THREE.PlaneGeometry( 13.35 , 30.54 );
            var material = new THREE.MeshBasicMaterial( { map: R1texture ,transparent: true, opacity: 0.95 } );
            DiamondR1people = new THREE.Mesh( geometry, material );
            DiamondR1people.position.copy(DiamondR1.position);   
            DiamondR1people.lookAt( camera.position );
            scene.add( DiamondR1people );
            var geometry = new THREE.PlaneGeometry( 70,70 );
            if( Language == "Chinese"){
                var material = new THREE.MeshBasicMaterial( { map: R1infotexture ,transparent: true, opacity: 0.95 } );
            }else if(Language == "English"){
                var material = new THREE.MeshBasicMaterial( { map: R1info2texture ,transparent: true, opacity: 0.95 } );
            }
            DiamondR1info = new THREE.Mesh( geometry, material );
            DiamondR1info.position.copy(DiamondR1.position);         
            DiamondR1info.lookAt( camera.position );
            scene.add( DiamondR1info );
            this.R1.from(DiamondR1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            this.R1.from(DiamondR1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.35");
            this.R1.to(DiamondR1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10);
            this.R1.to(DiamondR1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10.15);
            EndGameCountDown();
        }
        if(DName == "G1"){
            this.G1 = new TimelineMax();
            DiamondG1cube = scene.getObjectByName("DiamondG1cube"); 
            this.G1.to(DiamondG1cube.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut});
            //定義寶石名稱
            DiamondG1 = scene.getObjectByName("DiamondG1"); 
            this.G1.to(DiamondG1.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            var geometry = new THREE.PlaneGeometry( 14.23 , 25.81 );
            var material = new THREE.MeshBasicMaterial( { map: G1texture ,transparent: true, opacity: 0.95 } );
            DiamondG1people = new THREE.Mesh( geometry, material );
            DiamondG1people.position.copy(DiamondG1.position);       
            DiamondG1people.lookAt( camera.position );
            scene.add( DiamondG1people );
            var geometry = new THREE.PlaneGeometry( 70,70 );
            if( Language == "Chinese"){
                var material = new THREE.MeshBasicMaterial( { map: G1infotexture ,transparent: true, opacity: 0.95 } );
            }else if(Language == "English"){
                var material = new THREE.MeshBasicMaterial( { map: G1info2texture ,transparent: true, opacity: 0.95 } );
            }
            DiamondG1info = new THREE.Mesh( geometry, material );
            DiamondG1info.position.copy(DiamondG1.position);    
            DiamondG1info.lookAt( camera.position );
            scene.add( DiamondG1info );
            this.G1.from(DiamondG1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            this.G1.from(DiamondG1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.35");
            this.G1.to(DiamondG1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10);
            this.G1.to(DiamondG1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10.15);
            EndGameCountDown();
        }
        if(DName == "B1"){
            this.B1 = new TimelineMax();
            DiamondB1cube = scene.getObjectByName("DiamondB1cube"); 
            this.B1.to(DiamondB1cube.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut});
            //定義寶石名稱
            DiamondB1 = scene.getObjectByName("DiamondB1"); 
            this.B1.to(DiamondB1.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            var geometry = new THREE.PlaneGeometry( 13.73 , 30.54 );
            var material = new THREE.MeshBasicMaterial( { map: B1texture ,transparent: true, opacity: 0.95 } );
            DiamondB1people = new THREE.Mesh( geometry, material );
            DiamondB1people.position.copy(DiamondB1.position);      
            DiamondB1people.lookAt( camera.position );
            scene.add( DiamondB1people );
            var geometry = new THREE.PlaneGeometry( 70,70 );
            if( Language == "Chinese"){
                var material = new THREE.MeshBasicMaterial( { map: B1infotexture ,transparent: true, opacity: 0.95 } );
            }else if(Language == "English"){
                var material = new THREE.MeshBasicMaterial( { map: B1info2texture ,transparent: true, opacity: 0.95 } );
            }
            DiamondB1info = new THREE.Mesh( geometry, material );
            DiamondB1info.position.copy(DiamondB1.position);         
            DiamondB1info.lookAt( camera.position );
            scene.add( DiamondB1info );
            this.B1.from(DiamondB1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            this.B1.from(DiamondB1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.35");
            this.B1.to(DiamondB1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10);
            this.B1.to(DiamondB1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10.15);
            EndGameCountDown();
        }
        if(DName == "P1"){
            this.P1 = new TimelineMax();
            DiamondP1cube = scene.getObjectByName("DiamondP1cube"); 
            this.P1.to(DiamondP1cube.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut});
            //定義寶石名稱
            DiamondP1 = scene.getObjectByName("DiamondP1"); 
            this.P1.to(DiamondP1.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            var geometry = new THREE.PlaneGeometry( 16.62 , 27.46 );
            var material = new THREE.MeshBasicMaterial( { map: P1texture ,transparent: true, opacity: 0.95 } );
            DiamondP1people = new THREE.Mesh( geometry, material );
            DiamondP1people.position.copy(DiamondP1.position);   
            DiamondP1people.lookAt( camera.position );
            scene.add( DiamondP1people );
            var geometry = new THREE.PlaneGeometry( 70,70 );
            if( Language == "Chinese"){
                var material = new THREE.MeshBasicMaterial( { map: P1infotexture ,transparent: true, opacity: 0.95 } );
            }else if(Language == "English"){
                var material = new THREE.MeshBasicMaterial( { map: P1info2texture ,transparent: true, opacity: 0.95 } );
            }
            DiamondP1info = new THREE.Mesh( geometry, material );
            DiamondP1info.position.copy(DiamondP1.position);       
            DiamondP1info.lookAt( camera.position );
            scene.add( DiamondP1info );
            this.P1.from(DiamondP1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            this.P1.from(DiamondP1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.35");
            this.P1.to(DiamondP1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10);
            this.P1.to(DiamondP1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10.15);
            EndGameCountDown();
        }
        if(DName == "Y1"){
            this.Y1 = new TimelineMax();
            DiamondY1cube = scene.getObjectByName("DiamondY1cube"); 
            this.Y1.to(DiamondY1cube.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut});
            //定義寶石名稱
            DiamondY1 = scene.getObjectByName("DiamondY1"); 
            this.Y1.to(DiamondY1.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            var geometry = new THREE.PlaneGeometry( 14.62 , 27.54 );//腳色*2
            var material = new THREE.MeshBasicMaterial( { map: Y1texture ,transparent: true, opacity: 0.95 } );
            DiamondY1people = new THREE.Mesh( geometry, material );
            DiamondY1people.position.copy(DiamondY1.position);        
            DiamondY1people.lookAt( camera.position );
            scene.add( DiamondY1people );
            var geometry = new THREE.PlaneGeometry( 70,70 );
            if( Language == "Chinese"){
                var material = new THREE.MeshBasicMaterial( { map: Y1infotexture ,transparent: true, opacity: 0.95 } );
            }else if(Language == "English"){
                var material = new THREE.MeshBasicMaterial( { map: Y1info2texture ,transparent: true, opacity: 0.95 } );
            }
            DiamondY1info = new THREE.Mesh( geometry, material );
            DiamondY1info.position.copy(DiamondY1.position);    
            DiamondY1info.lookAt( camera.position );
            scene.add( DiamondY1info );
            this.Y1.from(DiamondY1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            this.Y1.from(DiamondY1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.35");
            this.Y1.to(DiamondY1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10);
            this.Y1.to(DiamondY1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10.15);
            EndGameCountDown();
        }
         if(DName == "O1"){
            this.O1 = new TimelineMax();
            DiamondO1cube = scene.getObjectByName("DiamondO1cube"); 
            this.O1.to(DiamondO1cube.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut});
            //定義寶石名稱
            DiamondO1 = scene.getObjectByName("DiamondO1"); 
            this.O1.to(DiamondO1.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            var geometry = new THREE.PlaneGeometry( 11.58 , 25.81 );//腳色*2
            var material = new THREE.MeshBasicMaterial( { map: O1texture ,transparent: true, opacity: 0.95 } );
            DiamondO1people = new THREE.Mesh( geometry, material );
            DiamondO1people.position.copy(DiamondO1.position);       
            DiamondO1people.lookAt( camera.position );
            scene.add( DiamondO1people );
            var geometry = new THREE.PlaneGeometry( 70,70 );
            if( Language == "Chinese"){
                var material = new THREE.MeshBasicMaterial( { map: O1infotexture ,transparent: true, opacity: 0.95 } );
            }else if(Language == "English"){
                var material = new THREE.MeshBasicMaterial( { map: O1info2texture ,transparent: true, opacity: 0.95 } );
            }
            DiamondO1info = new THREE.Mesh( geometry, material );
            DiamondO1info.position.copy (DiamondO1.position);
            DiamondO1info.lookAt( camera.position );
            scene.add( DiamondO1info );
            this.O1.from(DiamondO1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.5");
            this.O1.from(DiamondO1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},"-=0.35");
            this.O1.to(DiamondO1people.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10);
            this.O1.to(DiamondO1info.scale, 0.5 , { x:0 , y:0 , z:0 , ease:Expo.easeOut},10.15);
        }
        
    }
    
    function EndGameCountDown(){
        CountNumber++;
        document.getElementById("Counting").innerHTML = CountNumber;
        if(CountNumber >= 5){
            controls.enable = false;
            var EndGameAnim = new TimelineLite();
            EndGameAnim.to("#EndingGame", 0.5 , { y:0,opacity:1 ,onComplete: function() {
            document.getElementById("Background").style.display = "block";
            TweenMax.to("#Background", 0.5 , { y:0,opacity:1});
            document.getElementById("EndingGame").style.display = "block";
            renderer.domElement.style.top = '600px';
            }},9);
         }    
     }
        </script>
    </body>
</html>
